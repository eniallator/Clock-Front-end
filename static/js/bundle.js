"use strict";(()=>{var o=(e,t=document)=>t.querySelector(e),l=(e,t=document)=>[...t.querySelectorAll(e)],g=(e,t)=>e.closest(t),L=e=>{let t=document.createElement("template");return t.innerHTML=e,t.content.children.item(0)};l('[tabindex="0"]').forEach(e=>{e.onkeyup=t=>{t.key==="Enter"&&t.target===e&&e.click()}});var u=(e,t,n=!t)=>{t?(e.setAttribute("disabled",""),e.classList.add("button-disabled"),e.classList.remove("button-primary")):n&&(e.removeAttribute("disabled"),e.classList.remove("button-disabled"),e.classList.add("button-primary"))},b=o("button[type=submit]"),d=/^((0?[1-9]|1[0-2]):[0-5]\d(am|pm)|([01]\d|2[0-3]):[0-5]\d)$/i,H=/^[\da-f]{6}$/i,x=e=>o(".error-message",g(e,".form-control")),T=(e,t)=>{x(e).classList.toggle("hidden",t);let n=b.classList.contains("button-disabled");u(b,!t&&!n,l(".error-message").length===l(".error-message.hidden").length)},M=e=>{e.onchange=()=>{let t=d.test(e.value);T(e,t)}};l(".time-input").forEach(M);var m=o(".time-mode"),I=(e,t)=>(e%t+t)%t,w=/(\d+):(\d+)(am|pm)?/i;m.onchange=()=>{l(".time-input").forEach(e=>{let[t,n,E,f]=w.exec(e.value)??[];if(n==null)return;let s=Number(n);if(m.checked&&s<24){let i=I(s-1,12)+1;e.value=`${i}:${E}${s<12?"am":"pm"}`}else if(!m.checked&&s>0&&s<=12){let i=`${s%12+ +(f==="pm")*12}`;e.value=`${i.padStart(2,"0")}:${E}`}})};var h=o("input[name=time]");h.value=new Date().toLocaleString().replace(/\d+\/\d+\/\d+[^\d]*(?<t>\d+:\d+).*/,"$<t>");var r=o(".color-input input[type=text]"),a=o(".color-input input[type=color]");a.onchange=()=>{r.value=a.value.slice(1).toUpperCase()};r.onchange=()=>{let e=H.test(r.value);T(r,e),e&&(a.value=`#${r.value}`)};var p=o(".collection-rows"),k=Number(p.getAttribute("collection-limit")),c=o(".collection-new-row"),y=o(".collection-template").innerHTML,v=()=>{let e=L(y);p.appendChild(e);let t=e.querySelector(".time-input");return t&&M(t),o(".delete-row",e).onclick=n=>{n.preventDefault(),e.remove(),c.classList.contains("button-disabled")&&u(c,!1)},p.children.length>=k&&u(c,!0),e};c.onclick=v;var $=new URLSearchParams(location.search);for(let[e,t]of $.entries())switch(e){case"time":{d.test(t)&&(h.value=t);break}case"brightness":{let n=Number(t);n>=0&&n<=1&&(o("input[name=brightness]").value=t);break}case"color":{let n=t.slice(1).toUpperCase();H.test(n)&&(r.value=n,a.value=`#${n}`);break}case"alarm":{d.test(t)&&(v().value=t);break}}})();
//# sourceMappingURL=bundle.js.map
