"use strict";(()=>{var o=(e,t=document)=>t.querySelector(e),i=(e,t=document)=>[...t.querySelectorAll(e)],E=(e,t)=>e.closest(t),L=e=>{let t=document.createElement("template");return t.innerHTML=e,t.content.children.item(0)};i('[tabindex="0"]').forEach(e=>{e.onkeyup=t=>{t.key==="Enter"&&t.target===e&&e.click()}});var d=(e,t,n=!t)=>{t?(e.setAttribute("disabled",""),e.classList.add("button-disabled"),e.classList.remove("button-primary")):n&&(e.removeAttribute("disabled"),e.classList.remove("button-disabled"),e.classList.add("button-primary"))},b=o("button[type=submit]"),I=/^((0?[1-9]|1[0-2]):[0-5]\d(am|pm)|([01]\d|2[0-3]):[0-5]\d)$/i,H=/^[\da-f]{6}$/i,w=e=>o(".error-message",E(e,".form-control")),M=(e,t)=>{w(e).classList.toggle("hidden",t);let n=b.classList.contains("button-disabled");d(b,!t&&!n,i(".error-message").length===i(".error-message.hidden").length)},f=e=>{e.onchange=()=>{let t=I.test(e.value);M(e,t)}};i(".time-input").forEach(f);var u=o(".time-mode"),k=(e,t)=>(e%t+t)%t,y=(e,t)=>`${k(e-1,12)+1}:${t}${e<12?"am":"pm"}`,h=(e,t,n)=>`${e%12+ +(n==="pm")*12}:`.padStart(3,"0")+t,T=(e,t,n)=>n!=null?h(Number(e),t,n):`${e}:${t}`,p=/(\d+):(\d+)(am|pm)?/i;u.onchange=()=>{i(".time-input").forEach(e=>{let[t,n,s,r]=p.exec(e.value)??[];if(n==null||s==null)return;let l=Number(n);u.checked&&l<24?e.value=y(l,s):!u.checked&&l>0&&l<=12&&(e.value=h(l,s,r))})};var v=o("input[name=time]");v.value=new Date().toLocaleString().replace(/\d+\/\d+\/\d+[^\d]*(?<t>\d+:\d+).*/,"$<t>");var c=o(".color-input input[type=text]"),m=o(".color-input input[type=color]");m.onchange=()=>{c.value=m.value.slice(1).toUpperCase()};c.onchange=()=>{let e=H.test(c.value);M(c,e),e&&(m.value=`#${c.value}`)};var g=o(".collection-rows"),$=Number(g.getAttribute("collection-limit")),a=o(".collection-new-row"),S=o(".collection-template").innerHTML,x=()=>{let e=L(S);g.appendChild(e);let t=e.querySelector(".time-input");return t&&f(t),o(".delete-row",e).onclick=n=>{n.preventDefault(),e.remove(),a.classList.contains("button-disabled")&&d(a,!1)},g.children.length>=$&&d(a,!0),e};a.onclick=x;var B=new URLSearchParams(location.search);for(let[e,t]of B.entries())switch(e){case"time":{let[n,s,r,l]=p.exec(t)??[];s!=null&&r!=null&&(v.value=T(s,r,l));break}case"brightness":{let n=Number(t);n>=0&&n<=1&&(o("input[name=brightness]").value=t);break}case"color":{let n=t.slice(1).toUpperCase();H.test(n)&&(c.value=n,m.value=`#${n}`);break}case"alarm":{let[n,s,r,l]=p.exec(t)??[];s!=null&&r!=null&&(x().value=T(s,r,l));break}}})();
//# sourceMappingURL=bundle.js.map
