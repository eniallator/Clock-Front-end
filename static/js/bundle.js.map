{
  "version": 3,
  "sources": ["../../../src/helpers.ts", "../../../src/index.ts"],
  "sourcesContent": ["// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters\nexport const getId = <E extends HTMLElement>(id: string) =>\n  document.getElementById(id) as E;\n\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters\nexport const getEl = <E extends HTMLElement>(\n  selector: string,\n  el: ParentNode = document\n) => el.querySelector(selector) as E;\n\nexport const getAll = <E extends HTMLElement>(\n  selector: string,\n  el: ParentNode = document\n) => [...el.querySelectorAll<E>(selector)];\n\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters\nexport const closestEl = <E extends HTMLElement>(\n  el: HTMLElement,\n  selector: string\n) => el.closest(selector) as E;\n\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters\nexport const toHtml = <E extends HTMLElement>(str: string): E => {\n  const el = document.createElement(\"template\");\n  el.innerHTML = str;\n  return el.content.children.item(0) as E;\n};\n", "import { closestEl, getAll, getEl, toHtml } from \"./helpers.ts\";\n\ngetAll('[tabindex=\"0\"]').forEach((el) => {\n  el.onkeyup = (evt) => {\n    if (evt.key === \"Enter\" && evt.target === el) el.click();\n  };\n});\n\nconst toggleBtnDisabled = (\n  btnEl: HTMLButtonElement,\n  isDisabled: boolean,\n  isEnabled: boolean = !isDisabled\n) => {\n  if (isDisabled) {\n    btnEl.setAttribute(\"disabled\", \"\");\n    btnEl.classList.add(\"button-disabled\");\n    btnEl.classList.remove(\"button-primary\");\n  } else if (isEnabled) {\n    btnEl.removeAttribute(\"disabled\");\n    btnEl.classList.remove(\"button-disabled\");\n    btnEl.classList.add(\"button-primary\");\n  }\n};\n\nconst saveBtn = getEl<HTMLButtonElement>(\"button[type=submit]\");\n\nconst timeRegex =\n  /^((0?[1-9]|1[0-2]):[0-5]\\d(am|pm)|([01]\\d|2[0-3]):[0-5]\\d)$/i;\nconst colorRegex = /^[\\da-f]{6}$/i;\n\nconst getErrorMsgEl = (inputEl: HTMLInputElement) =>\n  getEl(\".error-message\", closestEl(inputEl, \".form-control\"));\n\nconst toggleErrorMessage = (inputEl: HTMLInputElement, hide: boolean) => {\n  getErrorMsgEl(inputEl).classList.toggle(\"hidden\", hide);\n  const saveBtnDisabled = saveBtn.classList.contains(\"button-disabled\");\n  toggleBtnDisabled(\n    saveBtn,\n    !hide && !saveBtnDisabled,\n    getAll(\".error-message\").length === getAll(\".error-message.hidden\").length\n  );\n};\n\nconst initTimeInput = (el: HTMLInputElement) => {\n  el.onchange = () => {\n    const valid = timeRegex.test(el.value);\n    toggleErrorMessage(el, valid);\n  };\n};\n\ngetAll<HTMLInputElement>(\".time-input\").forEach(initTimeInput);\nconst timeModeToggle = getEl<HTMLInputElement>(\".time-mode\");\nexport const positiveMod = (a: number, b: number) => ((a % b) + b) % b;\n\nconst timePartsRegex = /(\\d+):(\\d+)(am|pm)?/i;\ntimeModeToggle.onchange = () => {\n  getAll<HTMLInputElement>(\".time-input\").forEach((el) => {\n    const [_, hrStr, minStr, mode] = timePartsRegex.exec(el.value) ?? [];\n    if (hrStr == null) return;\n\n    const hr = Number(hrStr);\n\n    if (timeModeToggle.checked && hr < 24) {\n      const adjustedHr = positiveMod(hr - 1, 12) + 1;\n      el.value = `${adjustedHr}:${minStr}${hr < 12 ? \"am\" : \"pm\"}`;\n    } else if (!timeModeToggle.checked && hr > 0 && hr <= 12) {\n      const adjustedHrStr = `${(hr % 12) + Number(mode === \"pm\") * 12}`;\n      el.value = `${adjustedHrStr.padStart(2, \"0\")}:${minStr}`;\n    }\n  });\n};\n\nconst timeInput = getEl<HTMLInputElement>(\"input[name=time]\");\n\ntimeInput.value = new Date()\n  .toLocaleString()\n  .replace(/\\d+\\/\\d+\\/\\d+[^\\d]*(?<t>\\d+:\\d+).*/, \"$<t>\");\n\nconst colorTextEl = getEl<HTMLInputElement>(\".color-input input[type=text]\");\nconst colorEl = getEl<HTMLInputElement>(\".color-input input[type=color]\");\n\ncolorEl.onchange = () => {\n  colorTextEl.value = colorEl.value.slice(1).toUpperCase();\n};\ncolorTextEl.onchange = () => {\n  const valid = colorRegex.test(colorTextEl.value);\n  toggleErrorMessage(colorTextEl, valid);\n  if (valid) colorEl.value = `#${colorTextEl.value}`;\n};\n\nconst rowsEl = getEl(\".collection-rows\");\nconst collectionLimit = Number(rowsEl.getAttribute(\"collection-limit\"));\nconst newRowBtn = getEl<HTMLButtonElement>(\".collection-new-row\");\nconst rowTemplateHtml = getEl(\".collection-template\").innerHTML;\n\nconst createAlarm = () => {\n  const newRow = toHtml<HTMLInputElement>(rowTemplateHtml);\n  rowsEl.appendChild(newRow);\n  const newTimeInput = newRow.querySelector<HTMLInputElement>(\".time-input\");\n  if (newTimeInput) {\n    initTimeInput(newTimeInput);\n  }\n\n  getEl(\".delete-row\", newRow).onclick = (evt) => {\n    evt.preventDefault();\n    newRow.remove();\n\n    if (newRowBtn.classList.contains(\"button-disabled\")) {\n      toggleBtnDisabled(newRowBtn, false);\n    }\n  };\n\n  if (rowsEl.children.length >= collectionLimit) {\n    toggleBtnDisabled(newRowBtn, true);\n  }\n\n  return newRow;\n};\n\nnewRowBtn.onclick = createAlarm;\n\nconst initialValues = new URLSearchParams(location.search);\n\nfor (const [key, value] of initialValues.entries()) {\n  switch (key) {\n    case \"time\": {\n      if (timeRegex.test(value)) {\n        timeInput.value = value;\n      }\n      break;\n    }\n\n    case \"brightness\": {\n      const brightnessNum = Number(value);\n      if (brightnessNum >= 0 && brightnessNum <= 1) {\n        getEl<HTMLInputElement>(\"input[name=brightness]\").value = value;\n      }\n      break;\n    }\n\n    case \"color\": {\n      const hexValue = value.slice(1).toUpperCase();\n      if (colorRegex.test(hexValue)) {\n        colorTextEl.value = hexValue;\n        colorEl.value = `#${hexValue}`;\n      }\n      break;\n    }\n\n    case \"alarm\": {\n      if (timeRegex.test(value)) {\n        createAlarm().value = value;\n      }\n      break;\n    }\n  }\n}\n\n// Time input make an option to send \"now\" instead of a time\n"],
  "mappings": "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",
  "names": ["getEl", "selector", "el", "getAll", "closestEl", "toHtml", "str", "getAll", "el", "evt", "toggleBtnDisabled", "btnEl", "isDisabled", "isEnabled", "saveBtn", "getEl", "timeRegex", "colorRegex", "getErrorMsgEl", "inputEl", "closestEl", "toggleErrorMessage", "hide", "saveBtnDisabled", "initTimeInput", "valid", "timeModeToggle", "positiveMod", "a", "b", "timePartsRegex", "_", "hrStr", "minStr", "mode", "hr", "adjustedHr", "adjustedHrStr", "timeInput", "colorTextEl", "colorEl", "rowsEl", "collectionLimit", "newRowBtn", "rowTemplateHtml", "createAlarm", "newRow", "toHtml", "newTimeInput", "initialValues", "key", "value", "brightnessNum", "hexValue"]
}
